<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.8.5">Jekyll</generator><link href="http://localhost:4000/feed.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/" rel="alternate" type="text/html" /><updated>2019-06-17T18:36:40+02:00</updated><id>http://localhost:4000/</id><title type="html">mavilam site</title><subtitle>This is my attemp of a personal site with ‚ù§.</subtitle><author><name>Miguel √Åvila Monroy</name></author><entry><title type="html">What to read bot (II)</title><link href="http://localhost:4000/bot/2019/02/05/whattoread_post2.html" rel="alternate" type="text/html" title="What to read bot (II)" /><published>2019-02-05T22:43:48+01:00</published><updated>2019-02-05T22:43:48+01:00</updated><id>http://localhost:4000/bot/2019/02/05/whattoread_post2</id><content type="html" xml:base="http://localhost:4000/bot/2019/02/05/whattoread_post2.html">&lt;p&gt;More than a year ago I posted my first article about &lt;span style=&quot; font-weight: bold&quot;&gt;&lt;a href=&quot;http://telegram.me/what_to_read_bot&quot;&gt;my book ‚Äúrecommender‚Äù bot (@What_to_read_bot)&lt;/a&gt;&lt;/span&gt; ü§ñ . In this article I‚Äôm going to explain the changes and the process form the point of view of the development and the user.&lt;/p&gt;

&lt;p&gt;First of all, the code is open source now ‚ú®‚ú® !! This is the &lt;span style=&quot; font-weight: bold&quot;&gt;&lt;a href=&quot;https://github.com/mavilam/what_to_read_bot&quot;&gt;link of the GitHub Repository&lt;/a&gt;&lt;/span&gt; if you want to check it.&lt;/p&gt;

&lt;h2 id=&quot;interface-and-new-functionality&quot;&gt;Interface and new functionality&lt;/h2&gt;

&lt;p&gt;There has been a few changes in the functionality that are also reflected in the interface. In the begining there was two sources from where the books info was obtained, Amazon and La casa del libro. Now Amazon was removed, because of its web did not let me scrap the book info and Fnac and Libreria La central was added.&lt;/p&gt;

&lt;p&gt;The choices were so limited in the early version, this made me think about some kind of categories to choose in each source. All sources have several categories, after a short look I selected six categories identified as the mainly read. Obviously the interface had to change. In the current version, the selection of a type of book has two steps. First the category has to be chosen.&lt;/p&gt;

&lt;center&gt;&lt;img src=&quot;/img/botpost2categories.jpeg&quot; title=&quot;What to read bot&quot; alt=&quot;What to read bot interface&quot; width=&quot;50%&quot; /&gt;&lt;/center&gt;
&lt;p /&gt;

&lt;p&gt;Then the three sources are displayed and the user can pick one of the or pick three in a row. If you want to go back and select another category just press the back button.&lt;/p&gt;

&lt;center&gt;&lt;img src=&quot;/img/botpost2sources.jpeg&quot; title=&quot;What to read bot&quot; alt=&quot;What to read bot interface&quot; width=&quot;50%&quot; /&gt;&lt;/center&gt;
&lt;p /&gt;

&lt;p&gt;And the answer should look like this one:&lt;/p&gt;

&lt;center&gt;&lt;img src=&quot;/img/botpost2result.jpeg&quot; title=&quot;What to read bot&quot; alt=&quot;What to read bot interface&quot; width=&quot;50%&quot; /&gt;&lt;/center&gt;
&lt;p /&gt;

&lt;h2 id=&quot;technical-process&quot;&gt;Technical process&lt;/h2&gt;

&lt;p&gt;I‚Äôm going to try to shortly explain the interesting changes.&lt;/p&gt;

&lt;p&gt;When I thought about of adding new sources I tried to avoid the same problem that I had to face with the web of Amazon. For this purpose I scrap now with some headers in the http GET request, for cheating the web trying to looks like a browser instead of a bot or a script. This headers looks like this:&lt;/p&gt;

&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'User-Agent'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Mozilla/5.0 (Macintosh; Intel Mac OS X 10.14; rv:65.0) Gecko/20100101 Firefox/65.0'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;On the other hand the manual deployment could cause operational risk that can be avoided using a continuous integration development, so I added Travis CI for automatic deployment, running the tests (that should be more than what I made to be honest üòÇ) before deploying and more tasks that can be configurable. Travis provides you a free plan if the project is open source.&lt;/p&gt;

&lt;p&gt;The bot is deployed in a free tier of Heroku, and lately that was a thing disturbing me, all months the free hours were used but the traffic was very low. Checking the logs could find the problem, the telegram api was doing a long polling every tiny time period from a queue to get the messages. To resolve this issue I checked the webhook method instead of the polling one. This method consists in register a web service endpoint to be called each time that a message is received in the telegram chat. This cause a lower traffic in the server.&lt;/p&gt;

&lt;p&gt;Conclusion step by step my little bot is getting in shape üòÄ&lt;/p&gt;</content><author><name>Miguel √Åvila Monroy</name></author><summary type="html">More than a year ago I posted my first article about my book ‚Äúrecommender‚Äù bot (@What_to_read_bot) ü§ñ . In this article I‚Äôm going to explain the changes and the process form the point of view of the development and the user.</summary></entry><entry><title type="html">What to read bot (I)</title><link href="http://localhost:4000/bot/2017/12/29/welcome-to-jekyll.html" rel="alternate" type="text/html" title="What to read bot (I)" /><published>2017-12-29T22:43:48+01:00</published><updated>2017-12-29T22:43:48+01:00</updated><id>http://localhost:4000/bot/2017/12/29/welcome-to-jekyll</id><content type="html" xml:base="http://localhost:4000/bot/2017/12/29/welcome-to-jekyll.html">&lt;p&gt;Hey everyone! I‚Äôd like to introduce my telegram bot ü§ñ with a few words.&lt;/p&gt;

&lt;p&gt;&lt;span style=&quot; font-weight: bold&quot;&gt;&lt;a href=&quot;http://telegram.me/what_to_read_bot&quot;&gt;(@What_to_read_bot)&lt;/a&gt;&lt;/span&gt; What to read is a simple bot that recommends you whenever you want the most sold books of ‚ÄúAmazon‚Äù üá∫üá∏ and ‚ÄúLa casa del libro‚Äù (LCDL) üá™üá∏ at the momment when you request it.&lt;/p&gt;

&lt;p&gt;For now there are  the two big types of categories for each library: fiction and non fiction.&lt;/p&gt;

&lt;p&gt;Here is a pic of the interface:&lt;/p&gt;

&lt;center&gt;&lt;img src=&quot;/img/whattoreadcapture.jpg&quot; title=&quot;What to read bot&quot; alt=&quot;What to read bot interface&quot; width=&quot;50%&quot; /&gt;&lt;/center&gt;
&lt;p /&gt;

&lt;p&gt;Pressing each button, the bot will send you the top 3 in case of ‚ÄúAmazon‚Äù and the top 5 in case of ‚ÄúLa casa del libro‚Äù.&lt;/p&gt;

&lt;p&gt;It is still in beta version so if you find any issue or you want to recommend me something to improve don‚Äôt doubt: text me!&lt;/p&gt;</content><author><name>Miguel √Åvila Monroy</name></author><summary type="html">Hey everyone! I‚Äôd like to introduce my telegram bot ü§ñ with a few words.</summary></entry></feed>